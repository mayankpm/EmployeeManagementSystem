<div class="dashboard-container">
  <!-- Sidebar -->
  <app-sidebar 
    [currentUser]="currentUser"
    [activeRoute]="activeRoute">
  </app-sidebar>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <div class="page-info">
          <h1 class="page-title">Pending Approvals</h1>
          <p class="page-description">
            {{ hasPendingApprovals() ? 
               `Manage ${getPendingCount()} pending employee approvals` : 
               'No pending approvals at the moment' }}
          </p>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading && pendingEmployees.length === 0" class="loading-section">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="loading-text">Loading pending approvals...</p>
    </div>

    <!-- No Data State -->
    <div *ngIf="!isLoading && filteredEmployees.length === 0 && pendingEmployees.length === 0" class="no-data-section">
      <div class="no-data-content">
        <i class="fas fa-check-circle no-data-icon"></i>
        <h3>All Clear!</h3>
        <p>No pending approvals at the moment. All employees have been processed.</p>
      </div>
    </div>

    <!-- No Search Results -->
    <div *ngIf="!isLoading && filteredEmployees.length === 0 && pendingEmployees.length > 0" class="no-data-section">
      <div class="no-data-content">
        <i class="fas fa-search no-data-icon"></i>
        <h3>No Results Found</h3>
        <p>No employees match your search criteria.</p>
        <button class="btn btn-primary mt-3" (click)="searchTerm = ''; performSearch()">
          Clear Search
        </button>
      </div>
    </div>

    <!-- Employees Table -->
    <div *ngIf="!isLoading && filteredEmployees.length > 0" class="content-section">
      <div class="card table-card">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
                <tr>
                  <th scope="col">Emp ID</th>
                  <th scope="col">Name</th>
                  <th scope="col">Email</th>
                  <th scope="col">Department</th>
                  <th scope="col">Role</th>
                  <th scope="col">Status</th>
                  <th scope="col" class="text-center">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let emp of getPaginatedEmployees()" class="employee-row">
                  <td class="fw-semibold text-primary">#{{ emp.empId }}</td>
                  <td>
                    <div class="employee-name">
                      {{ emp.firstName }} {{ emp.lastName }}
                    </div>
                  </td>
                  <td class="email-cell">
                    <small class="text-muted">{{ emp.personalEmail }}</small>
                  </td>
                  <td>
                    <span class="department-badge">
                      {{ getDepartmentName(emp.deptCode || '') }}
                    </span>
                  </td>
                  <td>
                    <span [class]="getRoleBadgeClass(emp.roleCode)">
                      {{ emp.roleCode || 'Employee' }}
                    </span>
                  </td>
                  <td>
                    <span [class]="getStatusBadgeClass(emp.approvalStatus)">
                      {{ emp.approvalStatus || 'PENDING' }}
                    </span>
                  </td>
                  <td>
                    <div class="action-buttons">
                      <button 
                        class="btn btn-success btn-sm action-btn"
                        (click)="approveEmployee(emp.empId!)"
                        [disabled]="isLoading"
                        title="Approve Employee">
                        <i class="fas fa-check"></i> Approve
                      </button>
                      <button 
                        class="btn btn-danger btn-sm action-btn"
                        (click)="declineEmployee(emp.empId!)"
                        [disabled]="isLoading"
                        title="Decline Employee">
                        <i class="fas fa-times"></i> Decline
                      </button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Pagination -->
          <div class="pagination-section" *ngIf="totalPages > 1">
            <div class="row align-items-center">
              <div class="col-md-6">
                <span class="pagination-info">
                  Page {{ currentPage }} of {{ totalPages }} ({{ getTotalCount() }} total)
                </span>
              </div>
              <div class="col-md-6">
                <nav aria-label="Page navigation">
                  <ul class="pagination justify-content-end mb-0">
                    <li class="page-item" [class.disabled]="currentPage === 1">
                      <a class="page-link" (click)="previousPage()" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                      </a>
                    </li>
                    
                    <li *ngFor="let page of getPageNumbers()" 
                        class="page-item" 
                        [class.active]="page === currentPage">
                      <a class="page-link" (click)="goToPage(page)">{{ page }}</a>
                    </li>
                    
                    <li class="page-item" [class.disabled]="currentPage === totalPages">
                      <a class="page-link" (click)="nextPage()" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>