<div class="dashboard-container">
  <!-- Sidebar -->
  <app-sidebar 
    [currentUser]="currentUser"
    [activeRoute]="activeRoute">
  </app-sidebar>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <div class="page-info">
          <h1 class="page-title">Employee Details</h1>
          <p class="page-description">Complete information about the employee</p>
        </div>
        <div class="header-actions">
          <button class="btn btn-secondary back-btn" (click)="goBack()">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
          </button>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-section">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="loading-text">Loading employee details...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="errorMessage && !isLoading" class="error-section">
      <div class="alert alert-danger">
        <i class="fas fa-exclamation-triangle"></i> {{ errorMessage }}
      </div>
      <button class="btn btn-primary mt-3" (click)="goBack()">
        Return to Dashboard
      </button>
    </div>

    <!-- Employee Details -->
    <div *ngIf="employee && !isLoading" class="content-section">
      <div class="info-container">
        <!-- Employee Header -->
        <div class="employee-info">
          <h3>Employee ID: {{ employee.empId }}</h3>
          <p>Here are the full details of the employee.</p>
          <div class="employee-status">
            <span [class]="getStatusBadgeClass(employee.approvalStatus)" class="status-badge">
              {{ employee.approvalStatus || 'UNDEFINED' }}
            </span>
          </div>
        </div>

        <!-- Personal Information -->
        <div class="section-title">
          <i class="fas fa-user"></i> Personal Information
        </div>
        <div class="info-row">
          <div class="info-group">
            <label>First Name</label>
            <div class="info-value">{{ employee.firstName }}</div>
          </div>
          <div class="info-group">
            <label>Last Name</label>
            <div class="info-value">{{ employee.lastName }}</div>
          </div>
        </div>

        <div class="info-row">
          <div class="info-group">
            <label>Personal Email</label>
            <div class="info-value email-value">
              <i class="fas fa-envelope"></i> {{ employee.personalEmail }}
            </div>
          </div>
          <div class="info-group" *ngIf="employee.phone">
            <label>Phone Number</label>
            <div class="info-value">
              <i class="fas fa-phone"></i> {{ employee.phone }}
            </div>
          </div>
        </div>

        <!-- Work Information -->
        <div class="section-title">
          <i class="fas fa-briefcase"></i> Work Information
        </div>
        <div class="info-row">
          <div class="info-group">
            <label>Department</label>
            <div class="info-value">
              <i class="fas fa-building"></i> {{ getDepartmentName(employee.deptCode || '') }}
            </div>
          </div>
          <div class="info-group">
            <label>Role</label>
            <div class="info-value">
              <i class="fas fa-user-tag"></i> {{ employee.roleCode || 'Employee' }}
            </div>
          </div>
        </div>

        <div class="info-row">
          <div class="info-group" *ngIf="employee.officialEmail">
            <label>Official Email</label>
            <div class="info-value email-value">
              <i class="fas fa-envelope"></i> {{ employee.officialEmail }}
            </div>
          </div>
          <div class="info-group" *ngIf="employee.position">
            <label>Position</label>
            <div class="info-value">{{ employee.position }}</div>
          </div>
        </div>

        <!-- Additional Information -->
        <div class="section-title">
          <i class="fas fa-info-circle"></i> Additional Information
        </div>
        <div class="info-row">
          <div class="info-group" *ngIf="employee.age">
            <label>Age</label>
            <div class="info-value">
              <i class="fas fa-birthday-cake"></i> {{ employee.age }} years
            </div>
          </div>
          <div class="info-group" *ngIf="employee.dateOfJoining">
            <label>Date of Joining</label>
            <div class="info-value">
              <i class="fas fa-calendar-alt"></i> {{ employee.dateOfJoining | date }}
            </div>
          </div>
        </div>

        <div class="info-row">
          <div class="info-group full-width" *ngIf="employee.address">
            <label>Address</label>
            <div class="info-value">
              <i class="fas fa-map-marker-alt"></i> {{ employee.address }}
            </div>
          </div>
        </div>

        <!-- System Information -->
        <div class="section-title">
          <i class="fas fa-database"></i> System Information
        </div>
        <div class="info-row">
          <div class="info-group" *ngIf="employee.createdAt">
            <label>Created At</label>
            <div class="info-value">
              <i class="fas fa-calendar-plus"></i> {{ employee.createdAt | date:'medium' }}
            </div>
          </div>
          <div class="info-group" *ngIf="employee.updatedAt">
            <label>Last Updated</label>
            <div class="info-value">
              <i class="fas fa-calendar-check"></i> {{ employee.updatedAt | date:'medium' }}
            </div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons mt-4">
        <button class="btn btn-primary" [routerLink]="['/hr/employees', employee.empId, 'edit']">
          <i class="fas fa-edit"></i> Edit Employee
        </button>
        <button class="btn btn-outline-secondary" (click)="goBack()">
          <i class="fas fa-arrow-left"></i> Back to List
        </button>
      </div>
    </div>
  </main>
</div>