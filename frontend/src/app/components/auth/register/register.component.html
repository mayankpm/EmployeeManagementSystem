<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <!-- Main Heading -->
      <h1 class="main-heading text-center mb-4">Manhattan Employee Management</h1>
      
      <div class="card">
        <div class="card-header">
          <h3 class="text-center">Employee Registration</h3>
        </div>
        <div class="card-body">
          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <!-- Success Message -->
            <div *ngIf="successMessage" class="alert alert-success">
              {{ successMessage }}
            </div>

            <!-- Error Message -->
            <div *ngIf="errorMessage" class="alert alert-danger">
              {{ errorMessage }}
            </div>

            <div class="row">
              <!-- First Name -->
              <div class="col-md-6 mb-3">
                <label for="firstName" class="form-label">First Name</label>
                <input
                  type="text"
                  id="firstName"
                  formControlName="firstName"
                  class="form-control"
                  [class.is-invalid]="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched"
                  placeholder="Enter first name">
                <div *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched" class="invalid-feedback">
                  <div *ngIf="registerForm.get('firstName')?.errors?.['required']">First name is required</div>
                  <div *ngIf="registerForm.get('firstName')?.errors?.['minlength']">
                    First name must be at least 2 characters
                  </div>
                </div>
              </div>

              <!-- Last Name -->
              <div class="col-md-6 mb-3">
                <label for="lastName" class="form-label">Last Name</label>
                <input
                  type="text"
                  id="lastName"
                  formControlName="lastName"
                  class="form-control"
                  [class.is-invalid]="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched"
                  placeholder="Enter last name">
                <div *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched" class="invalid-feedback">
                  <div *ngIf="registerForm.get('lastName')?.errors?.['required']">Last name is required</div>
                  <div *ngIf="registerForm.get('lastName')?.errors?.['minlength']">
                    Last name must be at least 2 characters
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <!-- Age -->
              <div class="col-md-6 mb-3">
                <label for="age" class="form-label">Age</label>
                <input
                  type="number"
                  id="age"
                  formControlName="age"
                  class="form-control"
                  [class.is-invalid]="registerForm.get('age')?.invalid && registerForm.get('age')?.touched"
                  placeholder="Enter age" min="18" max="100">
                <div *ngIf="registerForm.get('age')?.invalid && registerForm.get('age')?.touched" class="invalid-feedback">
                  <div *ngIf="registerForm.get('age')?.errors?.['required']">Age is required</div>
                  <div *ngIf="registerForm.get('age')?.errors?.['min']">Must be at least 18 years old</div>
                  <div *ngIf="registerForm.get('age')?.errors?.['max']">Age must be reasonable</div>
                </div>
              </div>

              <!-- Phone -->
              <div class="col-md-6 mb-3">
                <label for="phone" class="form-label">Phone Number</label>
                <input
                  type="text"
                  id="phone"
                  formControlName="phone"
                  class="form-control"
                  [class.is-invalid]="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched"
                  placeholder="Enter 10-digit phone number">
                <div *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched" class="invalid-feedback">
                  <div *ngIf="registerForm.get('phone')?.errors?.['required']">Phone number is required</div>
                  <div *ngIf="registerForm.get('phone')?.errors?.['pattern']">
                    Please enter a valid 10-digit phone number
                  </div>
                </div>
              </div>
            </div>

            <!-- Address -->
            <div class="mb-3">
              <label for="address" class="form-label">Address</label>
              <input
                type="text"
                id="address"
                formControlName="address"
                class="form-control"
                [class.is-invalid]="registerForm.get('address')?.invalid && registerForm.get('address')?.touched"
                placeholder="Enter your address">
              <div *ngIf="registerForm.get('address')?.invalid && registerForm.get('address')?.touched" class="invalid-feedback">
                <div *ngIf="registerForm.get('address')?.errors?.['required']">Address is required</div>
                <div *ngIf="registerForm.get('address')?.errors?.['minlength']">
                  Address must be at least 10 characters
                </div>
              </div>
            </div>

            <!-- Personal Email -->
            <div class="mb-3">
              <label for="personalEmail" class="form-label">Personal Email</label>
              <input
                type="email"
                id="personalEmail"
                formControlName="personalEmail"
                class="form-control"
                [class.is-invalid]="registerForm.get('personalEmail')?.invalid && registerForm.get('personalEmail')?.touched"
                placeholder="Enter personal email">
              <div *ngIf="registerForm.get('personalEmail')?.invalid && registerForm.get('personalEmail')?.touched" class="invalid-feedback">
                <div *ngIf="registerForm.get('personalEmail')?.errors?.['required']">Email is required</div>
                <div *ngIf="registerForm.get('personalEmail')?.errors?.['email']">Please enter a valid email</div>
              </div>
            </div>

            <div class="row">
              <!-- Department -->
              <div class="col-md-6 mb-3">
                <label for="deptCode" class="form-label">Department</label>
                <select
                  id="deptCode"
                  formControlName="deptCode"
                  class="form-select"
                  [class.is-invalid]="registerForm.get('deptCode')?.invalid && registerForm.get('deptCode')?.touched">
                  <option value="">-- Select Department --</option>
                  <option *ngFor="let dept of departments" [value]="dept.value">{{ dept.label }}</option>
                </select>
                <div *ngIf="registerForm.get('deptCode')?.invalid && registerForm.get('deptCode')?.touched" class="invalid-feedback">
                  Department is required
                </div>
              </div>

              <!-- Role -->
              <div class="col-md-6 mb-3">
                <label for="roleCode" class="form-label">Role</label>
                <select
                  id="roleCode"
                  formControlName="roleCode"
                  class="form-select"
                  [class.is-invalid]="registerForm.get('roleCode')?.invalid && registerForm.get('roleCode')?.touched">
                  <option value="">-- Select Role --</option>
                  <option *ngFor="let role of roles" [value]="role.value">{{ role.label }}</option>
                </select>
                <div *ngIf="registerForm.get('roleCode')?.invalid && registerForm.get('roleCode')?.touched" class="invalid-feedback">
                  Role is required
                </div>
              </div>
            </div>

            <!-- Password -->
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <input
                type="password"
                id="password"
                formControlName="password"
                class="form-control"
                [class.is-invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
                placeholder="Enter password">
              <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="invalid-feedback">
                <div *ngIf="registerForm.get('password')?.errors?.['required']">Password is required</div>
                <div *ngIf="registerForm.get('password')?.errors?.['minlength']">
                  Password must be at least 6 characters
                </div>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="d-grid">
              <button 
                type="submit" 
                class="btn btn-primary"
                [disabled]="registerForm.invalid || isLoading">
                <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
                {{ isLoading ? 'Registering...' : 'Register' }}
              </button>
            </div>

            <!-- Login Link -->
            <div class="text-center mt-3">
              <p>Already have an account? <a routerLink="/login" class="text-decoration-none">Login here</a></p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>