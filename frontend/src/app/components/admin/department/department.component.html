<div class="container-fluid">
    <!-- Use Admin Sidebar -->
    <app-admin-sidebar [currentUser]="currentUser" [activeRoute]="activeRoute"></app-admin-sidebar>
    
    <!-- Main Content - DEPARTMENT MANAGEMENT -->
    <div class="main-content">
        <div class="header">
            <div class="page-title">
                <h1>Department Management</h1>
                <p>Manage department names and assigned HR personnel</p>
            </div>
            <a routerLink="/login" class="logout-btn">Logout</a>
        </div>

        <div class="department-table-container">
            <table>
                <thead>
                    <tr>
                        <th>Department Code</th>
                        <th>Department Name</th>
                        <th>Assigned HR</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let dept of departments">
                        <td>
                            <input type="text" 
                                   [value]="editingDepartments[dept.deptCode]?.deptCode" 
                                   readonly>
                        </td>
                        <td>
                            <input type="text" 
                                   [(ngModel)]="editingDepartments[dept.deptCode].deptName" 
                                   name="deptName_{{dept.deptCode}}"
                                   required>
                        </td>
                        <td>
                            <input type="text" 
                                   [(ngModel)]="editingDepartments[dept.deptCode].assignedHR" 
                                   name="assignedHR_{{dept.deptCode}}">
                        </td>
                        <td>
                            <button type="button" 
                                    class="btn edit" 
                                    (click)="updateDepartment(dept.deptCode)">
                                Edit
                            </button>
                            <button type="button" 
                                    class="btn delete" 
                                    (click)="deleteDepartment(dept.deptCode)">
                                Delete
                            </button>
                        </td>
                    </tr>
                    <tr *ngIf="departments.length === 0">
                        <td colspan="4" style="text-align: center; color: #666;">
                            No departments found
                        </td>
                    </tr>
                </tbody>
            </table>

            <div class="add-department-form">
                <h2>Add New Department</h2>
                <form (ngSubmit)="addDepartment()">
                    <div class="form-group">
                        <label>Department Code:</label>
                        <input type="text" 
                               [(ngModel)]="newDepartment.deptCode" 
                               name="deptCode" 
                               required>
                    </div>
                    <div class="form-group">
                        <label>Department Name:</label>
                        <input type="text" 
                               [(ngModel)]="newDepartment.deptName" 
                               name="deptName" 
                               required>
                    </div>
                    <div class="form-group">
                        <label>Assigned HR:</label>
                        <input type="text" 
                               [(ngModel)]="newDepartment.assignedHR" 
                               name="assignedHR">
                    </div>
                    <button type="submit">Add Department</button>
                </form>
            </div>
        </div>
    </div>
</div>